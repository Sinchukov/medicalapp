<script>
  (async()=>{
    const t = sessionStorage.getItem('token');
    if(!t) return location='login.html';
    const r = await fetch('/api/patient/recipes', {
      headers:{ Authorization:'Bearer '+t }
    });
    if(!r.ok) return alert('Не удалось загрузить рецепты');
    const list = await r.json() || [];
    const tb   = document.querySelector('#recipesTable tbody');
    tb.innerHTML = '';
    list.forEach(r => {
      tb.innerHTML +=
        `<tr>
           <td>${r.name}</td>
           <td>${r.dosage}</td>
           <td>${r.expiry}</td>
         </tr>`;
    });
  })();
</script>
